<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Hammerhead Proxy</title>
    <style>
      html,
      body,
      iframe {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        border: none;
        overflow: hidden;
      }
      iframe {
        display: block;
      }
    </style>

    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>

    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("./uv/uv.sw.js", { scope: "./uv/" })
          .then(() => console.log("UV SW registered"))
          .catch((err) => console.error("SW registration failed:", err));
      }
    </script>
  </head>
  <body>
    <iframe id="proxyFrame"></iframe>

    <script>
      const iframe = document.getElementById("proxyFrame");
      const params = new URLSearchParams(window.location.search);
      const target = params.get("url") || "https://hammerhead-games.vercel.app";

      if (typeof __uv$config !== "undefined") {
        const encoded = __uv$config.encodeUrl(target);
        iframe.src = __uv$config.prefix + encoded;
      } else {
        iframe.src = target;
      }
    </script>
  </body>
</html>
